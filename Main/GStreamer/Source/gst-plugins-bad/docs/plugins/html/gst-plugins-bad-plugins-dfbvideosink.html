<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>dfbvideosink</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="index.html" title="GStreamer Bad Plugins 0.10 Plugins Reference Manual">
<link rel="up" href="ch01.html" title="gst-plugins-bad Elements">
<link rel="prev" href="gst-plugins-bad-plugins-deinterlace.html" title="deinterlace">
<link rel="next" href="gst-plugins-bad-plugins-dvbsrc.html" title="dvbsrc">
<meta name="generator" content="GTK-Doc V1.10 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
<link rel="chapter" href="ch01.html" title="gst-plugins-bad Elements">
<link rel="chapter" href="ch02.html" title="gst-plugins-bad Plugins">
<link rel="chapter" href="ch03.html" title="gst-plugins-bad Classes">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="gst-plugins-bad-plugins-deinterlace.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="ch01.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">GStreamer Bad Plugins 0.10 Plugins Reference Manual</th>
<td><a accesskey="n" href="gst-plugins-bad-plugins-dvbsrc.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts"><nobr><a href="#gst-plugins-bad-plugins-dfbvideosink.synopsis" class="shortcut">Top</a>
                   | 
                  <a href="#gst-plugins-bad-plugins-dfbvideosink.description" class="shortcut">Description</a>
                   | 
                  <a href="#gst-plugins-bad-plugins-dfbvideosink.object-hierarchy" class="shortcut">Object Hierarchy</a>
                   | 
                  <a href="#gst-plugins-bad-plugins-dfbvideosink.implemented-interfaces" class="shortcut">Implemented Interfaces</a>
                   | 
                  <a href="#gst-plugins-bad-plugins-dfbvideosink.properties" class="shortcut">Properties</a></nobr></td></tr>
</table>
<div class="refentry" lang="en">
<a name="gst-plugins-bad-plugins-dfbvideosink"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="gst-plugins-bad-plugins-dfbvideosink.top_of_page"></a>dfbvideosink</span></h2>
<p>dfbvideosink — A DirectFB based videosink</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<a name="gst-plugins-bad-plugins-dfbvideosink.synopsis"></a><h2>Synopsis</h2>
<a name="GstDfbVideoSink"></a><pre class="synopsis">
                    <a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink-struct" title="GstDfbVideoSink">GstDfbVideoSink</a>;
</pre>
</div>
<div class="refsect1" lang="en">
<a name="gst-plugins-bad-plugins-dfbvideosink.object-hierarchy"></a><h2>Object Hierarchy</h2>
<pre class="synopsis">
  <a
href="/usr/share/gtk-doc/html/gobject/gobject-The-Base-Object-Type.html#GObject"
>GObject</a>
   +----GstObject
         +----GstElement
               +----GstBaseSink
                     +----<a
href="/usr/share/gtk-doc/html/gst-plugins-base-libs-0.10/gst-plugins-base-libs-gstvideosink.html#GstVideoSink"
>GstVideoSink</a>
                           +----GstDfbVideoSink
</pre>
</div>
<div class="refsect1" lang="en">
<a name="gst-plugins-bad-plugins-dfbvideosink.implemented-interfaces"></a><h2>Implemented Interfaces</h2>
<p>
GstDfbVideoSink implements
 GstImplementsInterface,  <a
href="/usr/share/gtk-doc/html/gst-plugins-base-libs-0.10/gst-plugins-base-libs-gstnavigation.html#GstNavigation"
>GstNavigation</a> and  <a
href="/usr/share/gtk-doc/html/gst-plugins-base-libs-0.10/gst-plugins-base-libs-gstcolorbalance.html#GstColorBalance"
>GstColorBalance</a>.</p>
</div>
<div class="refsect1" lang="en">
<a name="gst-plugins-bad-plugins-dfbvideosink.properties"></a><h2>Properties</h2>
<pre class="synopsis">
  "<a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink--brightness" title='The "brightness" property'>brightness</a>"               <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gint"
>gint</a>                  : Read / Write
  "<a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink--contrast" title='The "contrast" property'>contrast</a>"                 <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gint"
>gint</a>                  : Read / Write
  "<a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink--hue" title='The "hue" property'>hue</a>"                      <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gint"
>gint</a>                  : Read / Write
  "<a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink--pixel-aspect-ratio" title='The "pixel-aspect-ratio" property'>pixel-aspect-ratio</a>"       <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gchar"
>gchar</a>*                : Read / Write
  "<a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink--saturation" title='The "saturation" property'>saturation</a>"               <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gint"
>gint</a>                  : Read / Write
  "<a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink--surface" title='The "surface" property'>surface</a>"                  <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gpointer"
>gpointer</a>              : Write
  "<a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink--vsync" title='The "vsync" property'>vsync</a>"                    <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gboolean"
>gboolean</a>              : Read / Write
</pre>
</div>
<div class="refsect1" lang="en">
<a name="gst-plugins-bad-plugins-dfbvideosink.description"></a><h2>Description</h2>
<p>
DfbVideoSink renders video frames using the
<a class="ulink" href="http://www.directfb.org/" target="_top">DirectFB</a> library.
Rendering can happen in two different modes :
</p>
<div class="itemizedlist"><ul type="disc">
<li>
<p>
  Standalone: this mode will take complete control of the monitor forcing
  <a class="ulink" href="http://www.directfb.org/" target="_top">DirectFB</a> to fullscreen layout.
  This is convenient to test using the  gst-launch command line tool or
  other simple applications. It is possible to interrupt playback while
  being in this mode by pressing the Escape key.
  </p>
<p>
  This mode handles navigation events for every input device supported by
  the <a class="ulink" href="http://www.directfb.org/" target="_top">DirectFB</a> library, it will
  look for available video modes in the fb.modes file and try to switch
  the framebuffer video mode to the most suitable one. Depending on 
  hardware acceleration capabilities the element will handle scaling or not.
  If no acceleration is available it will do clipping or centering of the
  video frames respecting the original aspect ratio.
  </p>
</li>
<li>
<p>
  Embedded: this mode will render video frames in a 
  <a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink--surface" title='The "surface" property'><span class="type">"surface"</span></a> provided by the
  application developer. This is a more advanced usage of the element and
  it is required to integrate video playback in existing 
  <a class="ulink" href="http://www.directfb.org/" target="_top">DirectFB</a> applications.
  </p>
<p>
  When using this mode the element just renders to the
  <a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink--surface" title='The "surface" property'><span class="type">"surface"</span></a> provided by the 
  application, that means it won't handle navigation events and won't resize
  the <a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink--surface" title='The "surface" property'><span class="type">"surface"</span></a> to fit video
  frames geometry. Application has to implement the necessary code to grab
  informations about the negotiated geometry and resize there
  <a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink--surface" title='The "surface" property'><span class="type">"surface"</span></a> accordingly.
  </p>
</li>
</ul></div>
<p>
For both modes the element implements a buffer pool allocation system to 
optimize memory allocation time and handle reverse negotiation. Indeed if 
you insert an element like videoscale in the pipeline the video sink will
negotiate with it to try get a scaled video for either the fullscreen layout
or the application provided external <a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink--surface" title='The "surface" property'><span class="type">"surface"</span></a>.
</p>
<p>
</p>
<div class="refsect2" lang="en">
<a name="id2878733"></a><h3>Example application</h3>
<p>
</p>
<pre class="programlisting">

#include &lt;directfb.h&gt;
#include &lt;gst/gst.h&gt;

static IDirectFB *dfb = NULL;
static IDirectFBSurface *primary = NULL;
static GMainLoop *loop;

#define DFBCHECK(x...)                                         \
  {                                                            \
    DFBResult err = x;                                         \
                                                               \
    if (err != DFB_OK)                                         \
      {                                                        \
        fprintf( stderr, "%s &lt;%d&gt;:\n\t", __FILE__, __LINE__ ); \
        DirectFBErrorFatal( #x, err );                         \
      }                                                        \
  }

static gboolean
get_me_out (gpointer data)
{
  g_main_loop_quit (loop);
  return FALSE;
}

int
main (int argc, char *argv[])
{
  DFBSurfaceDescription dsc;
  GstElement *pipeline, *src, *sink;

  /* Init both GStreamer and DirectFB */
  DFBCHECK (DirectFBInit (&amp;argc, &amp;argv));
  gst_init (&amp;argc, &amp;argv);

  /* Creates DirectFB main context and set it to fullscreen layout */
  DFBCHECK (DirectFBCreate (&amp;dfb));
  DFBCHECK (dfb-&gt;SetCooperativeLevel (dfb, DFSCL_FULLSCREEN));

  /* We want a double buffered primary surface */
  dsc.flags = DSDESC_CAPS;
  dsc.caps = DSCAPS_PRIMARY | DSCAPS_FLIPPING;

  DFBCHECK (dfb-&gt;CreateSurface (dfb, &amp;dsc, &amp;primary));

  /* Creating our pipeline : videotestsrc ! dfbvideosink */
  pipeline = gst_pipeline_new (NULL);
  g_assert (pipeline);
  src = gst_element_factory_make ("videotestsrc", NULL);
  g_assert (src);
  sink = gst_element_factory_make ("dfbvideosink", NULL);
  g_assert (sink);
  /* That's the interesting part, giving the primary surface to dfbvideosink */
  g_object_set (sink, "surface", primary, NULL);

  /* Adding elements to the pipeline */
  gst_bin_add_many (GST_BIN (pipeline), src, sink, NULL);
  g_assert (gst_element_link (src, sink));

  /* Let's play ! */
  gst_element_set_state (pipeline, GST_STATE_PLAYING);

  /* we need to run a GLib main loop to get out of here */
  loop = g_main_loop_new (NULL, FALSE);
  /* Get us out after 20 seconds */
  g_timeout_add (20000, get_me_out, NULL);
  g_main_loop_run (loop);

  /* Release elements and stop playback */
  gst_element_set_state (pipeline, GST_STATE_NULL);

  /* Free the main loop */
  g_main_loop_unref (loop);

  /* Release DirectFB context and surface */
  primary-&gt;Release (primary);
  dfb-&gt;Release (dfb);

  return 0;
}

</pre>
<p>
</p>
</div>
<p>
</p>
<hr>
<div class="refsect2" lang="en">
<a name="id2878792"></a><h3>Example pipelines</h3>
<div class="informalexample"><pre class="programlisting">
gst-launch -v videotestsrc ! dfbvideosink hue=20000 saturation=40000 brightness=25000
</pre></div> test the colorbalance interface implementation in dfbvideosink
</div>
<div class="refsynopsisdiv">
<h2>Synopsis</h2>
<div class="refsect2" lang="en">
<a name="id2878812"></a><h3>Element Information</h3>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term">plugin</span></p></td>
<td>
            <a class="link" href="gst-plugins-bad-plugins-plugin-dfbvideosink.html#plugin-dfbvideosink">dfbvideosink</a>
          </td>
</tr>
<tr>
<td><p><span class="term">author</span></p></td>
<td>Julien Moutte &lt;julien@moutte.net&gt;</td>
</tr>
<tr>
<td><p><span class="term">class</span></p></td>
<td>Sink/Video</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2878874"></a><h3>Element Pads</h3>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term">name</span></p></td>
<td>sink</td>
</tr>
<tr>
<td><p><span class="term">direction</span></p></td>
<td>sink</td>
</tr>
<tr>
<td><p><span class="term">presence</span></p></td>
<td>always</td>
</tr>
<tr>
<td><p><span class="term">details</span></p></td>
<td>video/x-raw-rgb, framerate=(fraction)[ 0/1, 2147483647/1 ], width=(int)[ 1, 2147483647 ], height=(int)[ 1, 2147483647 ]</td>
</tr>
<tr>
<td><p><span class="term"></span></p></td>
<td> video/x-raw-yuv, framerate=(fraction)[ 0/1, 2147483647/1 ], width=(int)[ 1, 2147483647 ], height=(int)[ 1, 2147483647 ]</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<p>

</p>
</div>
<div class="refsect1" lang="en">
<a name="gst-plugins-bad-plugins-dfbvideosink.details"></a><h2>Details</h2>
<div class="refsect2" lang="en">
<a name="GstDfbVideoSink-struct"></a><h3>GstDfbVideoSink</h3>
<pre class="programlisting">typedef struct _GstDfbVideoSink GstDfbVideoSink;</pre>
<p>
The opaque <a class="link" href="gst-plugins-bad-plugins-dfbvideosink.html#GstDfbVideoSink"><span class="type">GstDfbVideoSink</span></a> structure.</p>
<p>

</p>
</div>
</div>
<div class="refsect1" lang="en">
<a name="gst-plugins-bad-plugins-dfbvideosink.property-details"></a><h2>Property Details</h2>
<div class="refsect2" lang="en">
<a name="GstDfbVideoSink--brightness"></a><h3>The <code class="literal">"brightness"</code> property</h3>
<pre class="programlisting">  "brightness"               <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gint"
>gint</a>                  : Read / Write</pre>
<p>The brightness of the video.</p>
<p>Allowed values: [0,65535]</p>
<p>Default value: 32768</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="GstDfbVideoSink--contrast"></a><h3>The <code class="literal">"contrast"</code> property</h3>
<pre class="programlisting">  "contrast"                 <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gint"
>gint</a>                  : Read / Write</pre>
<p>The contrast of the video.</p>
<p>Allowed values: [0,65535]</p>
<p>Default value: 32768</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="GstDfbVideoSink--hue"></a><h3>The <code class="literal">"hue"</code> property</h3>
<pre class="programlisting">  "hue"                      <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gint"
>gint</a>                  : Read / Write</pre>
<p>The hue of the video.</p>
<p>Allowed values: [0,65535]</p>
<p>Default value: 32768</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="GstDfbVideoSink--pixel-aspect-ratio"></a><h3>The <code class="literal">"pixel-aspect-ratio"</code> property</h3>
<pre class="programlisting">  "pixel-aspect-ratio"       <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gchar"
>gchar</a>*                : Read / Write</pre>
<p>The pixel aspect ratio of the device.</p>
<p>Default value: "1/1"</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="GstDfbVideoSink--saturation"></a><h3>The <code class="literal">"saturation"</code> property</h3>
<pre class="programlisting">  "saturation"               <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gint"
>gint</a>                  : Read / Write</pre>
<p>The saturation of the video.</p>
<p>Allowed values: [0,65535]</p>
<p>Default value: 32768</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="GstDfbVideoSink--surface"></a><h3>The <code class="literal">"surface"</code> property</h3>
<pre class="programlisting">  "surface"                  <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gpointer"
>gpointer</a>              : Write</pre>
<p>The target surface for video.</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="GstDfbVideoSink--vsync"></a><h3>The <code class="literal">"vsync"</code> property</h3>
<pre class="programlisting">  "vsync"                    <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gboolean"
>gboolean</a>              : Read / Write</pre>
<p>Wait for next vertical sync to draw frames.</p>
<p>Default value: TRUE</p>
</div>
</div>
</div>
<div class="footer">
<hr>
          Generated by GTK-Doc V1.10</div>
</body>
</html>

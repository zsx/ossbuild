<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>GstBaseSrc</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="index.html" title="GStreamer 0.10 Library Reference Manual">
<link rel="up" href="gstreamer-base.html" title="GStreamer Base and Utillity Classes">
<link rel="prev" href="gstreamer-base.html" title="GStreamer Base and Utillity Classes">
<link rel="next" href="GstBaseSink.html" title="GstBaseSink">
<meta name="generator" content="GTK-Doc V1.11 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
<link rel="part" href="gstreamer-libs.html" title="Part I. GStreamer Libraries">
<link rel="chapter" href="gstreamer-base.html" title="GStreamer Base and Utillity Classes">
<link rel="chapter" href="gstreamer-control.html" title="GStreamer Dynamic Parameter Control">
<link rel="chapter" href="gstreamer-dataprotocol.html" title="GStreamer Data Protocol">
<link rel="chapter" href="gstreamer-net.html" title="GStreamer Network Classes">
<link rel="chapter" href="gstreamer-check.html" title="GStreamer Check Unit Testing">
<link rel="chapter" href="gstreamer-hierarchy.html" title="Object Hierarchy">
<link rel="index" href="api-index-full.html" title="API Index">
<link rel="index" href="api-index-deprecated.html" title="Index of deprecated API">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="gstreamer-base.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="gstreamer-base.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">GStreamer 0.10 Library Reference Manual</th>
<td><a accesskey="n" href="GstBaseSink.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts">
<a href="#GstBaseSrc.synopsis" class="shortcut">Top</a>
                 | 
                <a href="#GstBaseSrc.description" class="shortcut">Description</a>
                 | 
                <a href="#GstBaseSrc.object-hierarchy" class="shortcut">Object Hierarchy</a>
                 | 
                <a href="#GstBaseSrc.properties" class="shortcut">Properties</a>
</td></tr>
</table>
<div class="refentry" lang="en">
<a name="GstBaseSrc"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="GstBaseSrc.top_of_page"></a>GstBaseSrc</span></h2>
<p>GstBaseSrc — Base class for getrange based source elements</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<a name="GstBaseSrc.synopsis"></a><h2>Synopsis</h2>
<pre class="synopsis">

#include &lt;gst/base/gstbasesrc.h&gt;

                    <a class="link" href="GstBaseSrc.html#GstBaseSrc-struct" title="GstBaseSrc">GstBaseSrc</a>;
                    <a class="link" href="GstBaseSrc.html#GstBaseSrcClass" title="GstBaseSrcClass">GstBaseSrcClass</a>;
enum                <a class="link" href="GstBaseSrc.html#GstBaseSrcFlags" title="enum GstBaseSrcFlags">GstBaseSrcFlags</a>;
<a
href="../gstreamer-0.10/GstPad.html#GstFlowReturn"
>GstFlowReturn</a>       <a class="link" href="GstBaseSrc.html#gst-base-src-wait-playing" title="gst_base_src_wait_playing ()">gst_base_src_wait_playing</a>           (<a class="link" href="GstBaseSrc.html" title="GstBaseSrc">GstBaseSrc</a> *src);
<a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a>            <a class="link" href="GstBaseSrc.html#gst-base-src-is-live" title="gst_base_src_is_live ()">gst_base_src_is_live</a>                (<a class="link" href="GstBaseSrc.html" title="GstBaseSrc">GstBaseSrc</a> *src);
void                <a class="link" href="GstBaseSrc.html#gst-base-src-set-live" title="gst_base_src_set_live ()">gst_base_src_set_live</a>               (<a class="link" href="GstBaseSrc.html" title="GstBaseSrc">GstBaseSrc</a> *src,
                                                         <a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a> live);
void                <a class="link" href="GstBaseSrc.html#gst-base-src-set-format" title="gst_base_src_set_format ()">gst_base_src_set_format</a>             (<a class="link" href="GstBaseSrc.html" title="GstBaseSrc">GstBaseSrc</a> *src,
                                                         <a
href="../gstreamer-0.10/gstreamer-GstFormat.html#GstFormat"
>GstFormat</a> format);
<a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a>            <a class="link" href="GstBaseSrc.html#gst-base-src-query-latency" title="gst_base_src_query_latency ()">gst_base_src_query_latency</a>          (<a class="link" href="GstBaseSrc.html" title="GstBaseSrc">GstBaseSrc</a> *src,
                                                         <a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a> *live,
                                                         <a
href="../gstreamer-0.10/GstClock.html#GstClockTime"
>GstClockTime</a> *min_latency,
                                                         <a
href="../gstreamer-0.10/GstClock.html#GstClockTime"
>GstClockTime</a> *max_latency);
<a
href="../glib/glib-Basic-Types.html#gulong"
>gulong</a>              <a class="link" href="GstBaseSrc.html#gst-base-src-get-blocksize" title="gst_base_src_get_blocksize ()">gst_base_src_get_blocksize</a>          (<a class="link" href="GstBaseSrc.html" title="GstBaseSrc">GstBaseSrc</a> *src);
void                <a class="link" href="GstBaseSrc.html#gst-base-src-set-blocksize" title="gst_base_src_set_blocksize ()">gst_base_src_set_blocksize</a>          (<a class="link" href="GstBaseSrc.html" title="GstBaseSrc">GstBaseSrc</a> *src,
                                                         <a
href="../glib/glib-Basic-Types.html#gulong"
>gulong</a> blocksize);
<a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a>            <a class="link" href="GstBaseSrc.html#gst-base-src-get-do-timestamp" title="gst_base_src_get_do_timestamp ()">gst_base_src_get_do_timestamp</a>       (<a class="link" href="GstBaseSrc.html" title="GstBaseSrc">GstBaseSrc</a> *src);
void                <a class="link" href="GstBaseSrc.html#gst-base-src-set-do-timestamp" title="gst_base_src_set_do_timestamp ()">gst_base_src_set_do_timestamp</a>       (<a class="link" href="GstBaseSrc.html" title="GstBaseSrc">GstBaseSrc</a> *src,
                                                         <a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a> timestamp);
#define             <a class="link" href="GstBaseSrc.html#GST-BASE-SRC-PAD--CAPS" title="GST_BASE_SRC_PAD()">GST_BASE_SRC_PAD</a>                    (obj)
</pre>
</div>
<div class="refsect1" lang="en">
<a name="GstBaseSrc.object-hierarchy"></a><h2>Object Hierarchy</h2>
<pre class="synopsis">
  <a
href="../gobject/gobject-The-Base-Object-Type.html#GObject"
>GObject</a>
   +----<a
href="../gstreamer-0.10/GstObject.html"
>GstObject</a>
         +----<a
href="../gstreamer-0.10/GstElement.html"
>GstElement</a>
               +----GstBaseSrc
                     +----<a class="link" href="GstPushSrc.html" title="GstPushSrc">GstPushSrc</a>
</pre>
</div>
<div class="refsect1" lang="en">
<a name="GstBaseSrc.properties"></a><h2>Properties</h2>
<pre class="synopsis">
  "<a class="link" href="GstBaseSrc.html#GstBaseSrc--blocksize" title='The "blocksize" property'>blocksize</a>"                <a
href="../glib/glib-Basic-Types.html#gulong"
>gulong</a>                : Read / Write
  "<a class="link" href="GstBaseSrc.html#GstBaseSrc--do-timestamp" title='The "do-timestamp" property'>do-timestamp</a>"             <a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a>              : Read / Write
  "<a class="link" href="GstBaseSrc.html#GstBaseSrc--num-buffers" title='The "num-buffers" property'>num-buffers</a>"              <a
href="../glib/glib-Basic-Types.html#gint"
>gint</a>                  : Read / Write
  "<a class="link" href="GstBaseSrc.html#GstBaseSrc--typefind" title='The "typefind" property'>typefind</a>"                 <a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a>              : Read / Write
</pre>
</div>
<div class="refsect1" lang="en">
<a name="GstBaseSrc.description"></a><h2>Description</h2>
<p>
This is a generice base class for source elements. The following
types of sources are supported:
</p>
<div class="itemizedlist"><ul type="disc">
<li><p>random access sources like files</p></li>
<li><p>seekable sources</p></li>
<li><p>live sources</p></li>
</ul></div>
<p>
</p>
<p>
The source can be configured to operate in any <a
href="../gstreamer-0.10/gstreamer-GstFormat.html#GstFormat"
><span class="type">GstFormat</span></a> with the
<a class="link" href="GstBaseSrc.html#gst-base-src-set-format" title="gst_base_src_set_format ()"><code class="function">gst_base_src_set_format()</code></a> method. The currently set format determines
the format of the internal <a
href="../gstreamer-0.10/gstreamer-GstSegment.html#GstSegment"
><span class="type">GstSegment</span></a> and any <span class="type">GST_EVENT_NEWSEGMENT</span>
events. The default format for <a class="link" href="GstBaseSrc.html" title="GstBaseSrc"><span class="type">GstBaseSrc</span></a> is <span class="type">GST_FORMAT_BYTES</span>.
</p>
<p>
<a class="link" href="GstBaseSrc.html" title="GstBaseSrc"><span class="type">GstBaseSrc</span></a> always supports push mode scheduling. If the following
conditions are met, it also supports pull mode scheduling:
</p>
<div class="itemizedlist"><ul type="disc">
<li><p>The format is set to <span class="type">GST_FORMAT_BYTES</span> (default).</p></li>
<li><p><span class="type">"is_seekable"</span> returns <a
href="../glib/glib-Standard-Macros.html#TRUE--CAPS"
><code class="literal">TRUE</code></a>.</p></li>
</ul></div>
<p>
</p>
<p>
Since 0.10.9, any <a class="link" href="GstBaseSrc.html" title="GstBaseSrc"><span class="type">GstBaseSrc</span></a> can enable pull based scheduling at any
time by overriding <span class="type">"check_get_range"</span> so that it returns <a
href="../glib/glib-Standard-Macros.html#TRUE--CAPS"
><code class="literal">TRUE</code></a>.
</p>
<p>
If all the conditions are met for operating in pull mode, <a class="link" href="GstBaseSrc.html" title="GstBaseSrc"><span class="type">GstBaseSrc</span></a> is
automatically seekable in push mode as well. The following conditions must
be met to make the element seekable in push mode when the format is not
<span class="type">""</span>
</p>
<div class="itemizedlist"><ul type="disc">
<li><p>
    <span class="type">"is_seekable"</span> returns <a
href="../glib/glib-Standard-Macros.html#TRUE--CAPS"
><code class="literal">TRUE</code></a>.
  </p></li>
<li><p>
    <span class="type">"query"</span> can convert all supported seek formats to the
    internal format as set with <a class="link" href="GstBaseSrc.html#gst-base-src-set-format" title="gst_base_src_set_format ()"><code class="function">gst_base_src_set_format()</code></a>.
  </p></li>
<li><p>
    <span class="type">"do_seek"</span> is implemented, performs the seek and returns <a
href="../glib/glib-Standard-Macros.html#TRUE--CAPS"
><code class="literal">TRUE</code></a>.
  </p></li>
</ul></div>
<p>
</p>
<p>
When the element does not meet the requirements to operate in pull mode,
the offset and length in the <span class="type">"create"</span> method should be ignored.
It is recommended to subclass <a class="link" href="GstPushSrc.html" title="GstPushSrc"><span class="type">GstPushSrc</span></a> instead, in this situation. If the
element can operate in pull mode but only with specific offsets and
lengths, it is allowed to generate an error when the wrong values are passed
to the <span class="type">"create"</span> function.
</p>
<p>
<a class="link" href="GstBaseSrc.html" title="GstBaseSrc"><span class="type">GstBaseSrc</span></a> has support for live sources. Live sources are sources that when
paused discard data, such as audio or video capture devices. A typical live
source also produces data at a fixed rate and thus provides a clock to publish
this rate.
Use <a class="link" href="GstBaseSrc.html#gst-base-src-set-live" title="gst_base_src_set_live ()"><code class="function">gst_base_src_set_live()</code></a> to activate the live source mode.
</p>
<p>
A live source does not produce data in the PAUSED state. This means that the
<span class="type">"create"</span> method will not be called in PAUSED but only in PLAYING.
To signal the pipeline that the element will not produce data, the return
value from the READY to PAUSED state will be <span class="type">GST_STATE_CHANGE_NO_PREROLL</span>.
</p>
<p>
A typical live source will timestamp the buffers it creates with the
current running time of the pipeline. This is one reason why a live source
can only produce data in the PLAYING state, when the clock is actually
distributed and running.
</p>
<p>
Live sources that synchronize and block on the clock (an audio source, for
example) can since 0.10.12 use <a class="link" href="GstBaseSrc.html#gst-base-src-wait-playing" title="gst_base_src_wait_playing ()"><code class="function">gst_base_src_wait_playing()</code></a> when the ::create
function was interrupted by a state change to PAUSED.
</p>
<p>
The <span class="type">"get_times"</span> method can be used to implement pseudo-live
sources.
It only makes sense to implement the ::get_times function if the source is
a live source. The ::get_times function should return timestamps starting
from 0, as if it were a non-live source. The base class will make sure that
the timestamps are transformed into the current running_time.
The base source will then wait for the calculated running_time before pushing
out the buffer.
</p>
<p>
For live sources, the base class will by default report a latency of 0.
For pseudo live sources, the base class will by default measure the difference
between the first buffer timestamp and the start time of get_times and will
report this value as the latency.
Subclasses should override the query function when this behaviour is not
acceptable.
</p>
<p>
There is only support in <a class="link" href="GstBaseSrc.html" title="GstBaseSrc"><span class="type">GstBaseSrc</span></a> for exactly one source pad, which
should be named "src". A source implementation (subclass of <a class="link" href="GstBaseSrc.html" title="GstBaseSrc"><span class="type">GstBaseSrc</span></a>)
should install a pad template in its class_init function, like so:
</p>
<pre class="programlisting">
static void
my_element_class_init (GstMyElementClass *klass)
{
  GstElementClass *gstelement_class = GST_ELEMENT_CLASS (klass);
  // srctemplate should be a <a
href="../gstreamer-0.10/GstPadTemplate.html#GstStaticPadTemplate"
>GstStaticPadTemplate</a> with direction
  // GST_PAD_SRC and name "src"
  gst_element_class_add_pad_template (gstelement_class,
      gst_static_pad_template_get (&amp;srctemplate));
  // see <a
href="../gstreamer-0.10/GstElementFactory.html#GstElementDetails"
>GstElementDetails</a>
  gst_element_class_set_details (gstelement_class, &amp;details);
}
</pre>
<p>
</p>
<p>
</p>
<div class="refsect2" lang="en">
<a name="id2766687"></a><h3>Controlled shutdown of live sources in applications</h3>
<p>
Applications that record from a live source may want to stop recording
in a controlled way, so that the recording is stopped, but the data
already in the pipeline is processed to the end (remember that many live
sources would go on recording forever otherwise). For that to happen the
application needs to make the source stop recording and send an EOS
event down the pipeline. The application would then wait for an
EOS message posted on the pipeline's bus to know when all data has
been processed and the pipeline can safely be stopped.
</p>
<p>
Since GStreamer 0.10.16 an application may send an EOS event to a source
element to make it perform the EOS logic (send EOS event downstream or post a
<span class="type">GST_MESSAGE_SEGMENT_DONE</span> on the bus). This can typically be done
with the <a
href="../gstreamer-0.10/GstElement.html#gst-element-send-event"
><code class="function">gst_element_send_event()</code></a> function on the element or its parent bin.
</p>
<p>
After the EOS has been sent to the element, the application should wait for
an EOS message to be posted on the pipeline's bus. Once this EOS message is
received, it may safely shut down the entire pipeline.
</p>
<p>
The old behaviour for controlled shutdown introduced since GStreamer 0.10.3
is still available but deprecated as it is dangerous and less flexible.
</p>
<p>
Last reviewed on 2007-12-19 (0.10.16)
</p>
</div>
<p>
</p>
</div>
<div class="refsect1" lang="en">
<a name="GstBaseSrc.details"></a><h2>Details</h2>
<div class="refsect2" lang="en">
<a name="GstBaseSrc-struct"></a><h3>GstBaseSrc</h3>
<pre class="programlisting">typedef struct _GstBaseSrc GstBaseSrc;</pre>
<p>
The opaque <a class="link" href="GstBaseSrc.html" title="GstBaseSrc"><span class="type">GstBaseSrc</span></a> data structure.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="GstBaseSrcClass"></a><h3>GstBaseSrcClass</h3>
<pre class="programlisting">typedef struct {
  GstElementClass parent_class;

  /* virtual methods for subclasses */

  /* get caps from subclass */
  GstCaps*      (*get_caps)     (GstBaseSrc *src);
  /* notify the subclass of new caps */
  gboolean      (*set_caps)     (GstBaseSrc *src, GstCaps *caps);

  /* decide on caps */
  gboolean      (*negotiate)    (GstBaseSrc *src);

  /* generate and send a newsegment (UNUSED) */
  gboolean      (*newsegment)   (GstBaseSrc *src);

  /* start and stop processing, ideal for opening/closing the resource */
  gboolean      (*start)        (GstBaseSrc *src);
  gboolean      (*stop)         (GstBaseSrc *src);

  /* given a buffer, return start and stop time when it should be pushed
   * out. The base class will sync on the clock using these times. */
  void          (*get_times)    (GstBaseSrc *src, GstBuffer *buffer,
                                 GstClockTime *start, GstClockTime *end);

  /* get the total size of the resource in bytes */
  gboolean      (*get_size)     (GstBaseSrc *src, guint64 *size);

  /* check if the resource is seekable */
  gboolean      (*is_seekable)  (GstBaseSrc *src);
  /* unlock any pending access to the resource. subclasses should unlock
   * any function ASAP. */
  gboolean      (*unlock)       (GstBaseSrc *src);

  /* notify subclasses of an event */
  gboolean      (*event)        (GstBaseSrc *src, GstEvent *event);

  /* ask the subclass to create a buffer with offset and size */
  GstFlowReturn (*create)       (GstBaseSrc *src, guint64 offset, guint size,
                                 GstBuffer **buf);

  /* additions that change padding... */
  /* notify subclasses of a seek */
  gboolean      (*do_seek)      (GstBaseSrc *src, GstSegment *segment);
  /* notify subclasses of a query */
  gboolean      (*query)        (GstBaseSrc *src, GstQuery *query);

  /* check whether the source would support pull-based operation if
   * it were to be opened now. This vfunc is optional, but should be
   * implemented if possible to avoid unnecessary start/stop cycles.
   * The default implementation will open and close the resource to
   * find out whether get_range is supported and that is usually
   * undesirable. */
  gboolean      (*check_get_range) (GstBaseSrc *src);

  /* called if, in negotiation, caps need fixating */
  void          (*fixate)       (GstBaseSrc *src, GstCaps *caps);

  /* Clear any pending unlock request, as we succeeded in unlocking */
  gboolean      (*unlock_stop)  (GstBaseSrc *src);

  /* Prepare the segment on which to perform do_seek(), converting to the
   * current basesrc format. */
  gboolean      (*prepare_seek_segment) (GstBaseSrc *src, GstEvent *seek,
                                         GstSegment *segment);
} GstBaseSrcClass;
</pre>
<p>
Subclasses can override any of the available virtual methods or not, as
needed. At the minimum, the <em class="parameter"><code>create</code></em> method should be overridden to produce
buffers.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><a
href="../gstreamer-0.10/GstElement.html#GstElementClass"
>GstElementClass</a> <em class="structfield"><code>parent_class</code></em>;</span></p></td>
<td> Element parent class
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>get_caps</code></em> ()</span></p></td>
<td> Called to get the caps to report
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>set_caps</code></em> ()</span></p></td>
<td> Notify subclass of changed output caps
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>negotiate</code></em> ()</span></p></td>
<td> Negotiated the caps with the peer.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>newsegment</code></em> ()</span></p></td>
<td> Generate and send a new_segment event (UNUSED)
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>start</code></em> ()</span></p></td>
<td> Start processing. Subclasses should open resources and prepare
   to produce data.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>stop</code></em> ()</span></p></td>
<td> Stop processing. Subclasses should use this to close resources.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>get_times</code></em> ()</span></p></td>
<td> Given a buffer, return the start and stop time when it
   should be pushed out. The base class will sync on the clock using
   these times.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>get_size</code></em> ()</span></p></td>
<td> Return the total size of the resource, in the configured format.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>is_seekable</code></em> ()</span></p></td>
<td> Check if the source can seek
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>unlock</code></em> ()</span></p></td>
<td> Unlock any pending access to the resource. Subclasses should
   unblock any blocked function ASAP
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>event</code></em> ()</span></p></td>
<td> Override this to implement custom event handling.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>create</code></em> ()</span></p></td>
<td> Ask the subclass to create a buffer with offset and size.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>do_seek</code></em> ()</span></p></td>
<td> Perform seeking on the resource to the indicated segment.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>query</code></em> ()</span></p></td>
<td> Handle a requested query.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>check_get_range</code></em> ()</span></p></td>
<td> Check whether the source would support pull-based
  operation if it were to be opened now. This vfunc is optional, but
  should be implemented if possible to avoid unnecessary start/stop
  cycles. The default implementation will open and close the resource
  to find out whether get_range is supported, and that is usually
  undesirable.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>fixate</code></em> ()</span></p></td>
<td> Called during negotiation if caps need fixating. Implement instead of
  setting a fixate function on the source pad.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>unlock_stop</code></em> ()</span></p></td>
<td> Clear the previous unlock request. Subclasses should clear
   any state they set during <code class="function">unlock()</code>, such as clearing command queues.
</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code>prepare_seek_segment</code></em> ()</span></p></td>
<td> Prepare the GstSegment that will be passed to the
  do_seek vmethod for executing a seek request. Sub-classes should override
  this if they support seeking in formats other than the configured native
  format. By default, it tries to convert the seek arguments to the
  configured native format and prepare a segment in that format.
  Since: 0.10.13
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="GstBaseSrcFlags"></a><h3>enum GstBaseSrcFlags</h3>
<pre class="programlisting">typedef enum {
  GST_BASE_SRC_STARTED           = (GST_ELEMENT_FLAG_LAST &lt;&lt; 0),
  /* padding */
  GST_BASE_SRC_FLAG_LAST         = (GST_ELEMENT_FLAG_LAST &lt;&lt; 2)
} GstBaseSrcFlags;
</pre>
<p>
The <a
href="../gstreamer-0.10/GstElement.html"
><span class="type">GstElement</span></a> flags that a basesrc element may have.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><a name="GST-BASE-SRC-STARTED--CAPS"></a><span class="term"><code class="literal">GST_BASE_SRC_STARTED</code></span></p></td>
<td> has source been started
</td>
</tr>
<tr>
<td><p><a name="GST-BASE-SRC-FLAG-LAST--CAPS"></a><span class="term"><code class="literal">GST_BASE_SRC_FLAG_LAST</code></span></p></td>
<td> offset to define more flags
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="gst-base-src-wait-playing"></a><h3>gst_base_src_wait_playing ()</h3>
<pre class="programlisting"><a
href="../gstreamer-0.10/GstPad.html#GstFlowReturn"
>GstFlowReturn</a>       gst_base_src_wait_playing           (<a class="link" href="GstBaseSrc.html" title="GstBaseSrc">GstBaseSrc</a> *src);</pre>
<p>
If the <span class="type">"create"</span> method performs its own synchronisation against
the clock it must unblock when going from PLAYING to the PAUSED state and call
this method before continuing to produce the remaining data.
</p>
<p>
This function will block until a state change to PLAYING happens (in which
case this function returns <span class="type">GST_FLOW_OK</span>) or the processing must be stopped due
to a state change to READY or a FLUSH event (in which case this function
returns <span class="type">GST_FLOW_WRONG_STATE</span>).</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>src</code></em> :</span></p></td>
<td> the src
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> <span class="type">GST_FLOW_OK</span> if <em class="parameter"><code>src</code></em> is PLAYING and processing can
continue. Any other return value should be returned from the create vmethod.
</td>
</tr>
</tbody>
</table></div>
<p class="since">Since 0.10.12</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="gst-base-src-is-live"></a><h3>gst_base_src_is_live ()</h3>
<pre class="programlisting"><a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a>            gst_base_src_is_live                (<a class="link" href="GstBaseSrc.html" title="GstBaseSrc">GstBaseSrc</a> *src);</pre>
<p>
Check if an element is in live mode.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>src</code></em> :</span></p></td>
<td> base source instance
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> <a
href="../glib/glib-Standard-Macros.html#TRUE--CAPS"
><code class="literal">TRUE</code></a> if element is in live mode.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="gst-base-src-set-live"></a><h3>gst_base_src_set_live ()</h3>
<pre class="programlisting">void                gst_base_src_set_live               (<a class="link" href="GstBaseSrc.html" title="GstBaseSrc">GstBaseSrc</a> *src,
                                                         <a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a> live);</pre>
<p>
If the element listens to a live source, <em class="parameter"><code>live</code></em> should
be set to <a
href="../glib/glib-Standard-Macros.html#TRUE--CAPS"
><code class="literal">TRUE</code></a>.
</p>
<p>
A live source will not produce data in the PAUSED state and
will therefore not be able to participate in the PREROLL phase
of a pipeline. To signal this fact to the application and the
pipeline, the state change return value of the live source will
be GST_STATE_CHANGE_NO_PREROLL.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>src</code></em> :</span></p></td>
<td> base source instance
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>live</code></em> :</span></p></td>
<td> new live-mode
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="gst-base-src-set-format"></a><h3>gst_base_src_set_format ()</h3>
<pre class="programlisting">void                gst_base_src_set_format             (<a class="link" href="GstBaseSrc.html" title="GstBaseSrc">GstBaseSrc</a> *src,
                                                         <a
href="../gstreamer-0.10/gstreamer-GstFormat.html#GstFormat"
>GstFormat</a> format);</pre>
<p>
Sets the default format of the source. This will be the format used
for sending NEW_SEGMENT events and for performing seeks.
</p>
<p>
If a format of GST_FORMAT_BYTES is set, the element will be able to
operate in pull mode if the <span class="type">"is_seekable"</span> returns TRUE.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>src</code></em> :</span></p></td>
<td> base source instance
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>format</code></em> :</span></p></td>
<td> the format to use
</td>
</tr>
</tbody>
</table></div>
<p class="since">Since 0.10.1</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="gst-base-src-query-latency"></a><h3>gst_base_src_query_latency ()</h3>
<pre class="programlisting"><a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a>            gst_base_src_query_latency          (<a class="link" href="GstBaseSrc.html" title="GstBaseSrc">GstBaseSrc</a> *src,
                                                         <a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a> *live,
                                                         <a
href="../gstreamer-0.10/GstClock.html#GstClockTime"
>GstClockTime</a> *min_latency,
                                                         <a
href="../gstreamer-0.10/GstClock.html#GstClockTime"
>GstClockTime</a> *max_latency);</pre>
<p>
Query the source for the latency parameters. <em class="parameter"><code>live</code></em> will be TRUE when <em class="parameter"><code>src</code></em> is
configured as a live source. <em class="parameter"><code>min_latency</code></em> will be set to the difference
between the running time and the timestamp of the first buffer.
<em class="parameter"><code>max_latency</code></em> is always the undefined value of -1.
</p>
<p>
This function is mostly used by subclasses.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>src</code></em> :</span></p></td>
<td> the source
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>live</code></em> :</span></p></td>
<td> if the source is live
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>min_latency</code></em> :</span></p></td>
<td> the min latency of the source
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>max_latency</code></em> :</span></p></td>
<td> the max latency of the source
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> TRUE if the query succeeded.

</td>
</tr>
</tbody>
</table></div>
<p class="since">Since 0.10.13</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="gst-base-src-get-blocksize"></a><h3>gst_base_src_get_blocksize ()</h3>
<pre class="programlisting"><a
href="../glib/glib-Basic-Types.html#gulong"
>gulong</a>              gst_base_src_get_blocksize          (<a class="link" href="GstBaseSrc.html" title="GstBaseSrc">GstBaseSrc</a> *src);</pre>
<p>
Get the number of bytes that <em class="parameter"><code>src</code></em> will push out with each buffer.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>src</code></em> :</span></p></td>
<td> the source
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> the number of bytes pushed with each buffer.

</td>
</tr>
</tbody>
</table></div>
<p class="since">Since 0.10.22</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="gst-base-src-set-blocksize"></a><h3>gst_base_src_set_blocksize ()</h3>
<pre class="programlisting">void                gst_base_src_set_blocksize          (<a class="link" href="GstBaseSrc.html" title="GstBaseSrc">GstBaseSrc</a> *src,
                                                         <a
href="../glib/glib-Basic-Types.html#gulong"
>gulong</a> blocksize);</pre>
<p>
Set the number of bytes that <em class="parameter"><code>src</code></em> will push out with each buffer. When
<em class="parameter"><code>blocksize</code></em> is set to -1, a default length will be used.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>src</code></em> :</span></p></td>
<td> the source
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>blocksize</code></em> :</span></p></td>
<td> the new blocksize in bytes
</td>
</tr>
</tbody>
</table></div>
<p class="since">Since 0.10.22</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="gst-base-src-get-do-timestamp"></a><h3>gst_base_src_get_do_timestamp ()</h3>
<pre class="programlisting"><a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a>            gst_base_src_get_do_timestamp       (<a class="link" href="GstBaseSrc.html" title="GstBaseSrc">GstBaseSrc</a> *src);</pre>
<p>
Query if <em class="parameter"><code>src</code></em> timestamps outgoing buffers based on the current running_time.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>src</code></em> :</span></p></td>
<td> the source
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> <a
href="../glib/glib-Standard-Macros.html#TRUE--CAPS"
><code class="literal">TRUE</code></a> if the base class will automatically timestamp outgoing buffers.

</td>
</tr>
</tbody>
</table></div>
<p class="since">Since 0.10.15</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="gst-base-src-set-do-timestamp"></a><h3>gst_base_src_set_do_timestamp ()</h3>
<pre class="programlisting">void                gst_base_src_set_do_timestamp       (<a class="link" href="GstBaseSrc.html" title="GstBaseSrc">GstBaseSrc</a> *src,
                                                         <a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a> timestamp);</pre>
<p>
Configure <em class="parameter"><code>src</code></em> to automatically timestamp outgoing buffers based on the
current running_time of the pipeline. This property is mostly useful for live
sources.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>src</code></em> :</span></p></td>
<td> the source
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>timestamp</code></em> :</span></p></td>
<td> enable or disable timestamping
</td>
</tr>
</tbody>
</table></div>
<p class="since">Since 0.10.15</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="GST-BASE-SRC-PAD--CAPS"></a><h3>GST_BASE_SRC_PAD()</h3>
<pre class="programlisting">#define GST_BASE_SRC_PAD(obj)                 (GST_BASE_SRC_CAST (obj)-&gt;srcpad)
</pre>
<p>
Gives the pointer to the <a
href="../gstreamer-0.10/GstPad.html"
><span class="type">GstPad</span></a> object of the element.</p>
<p>
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>obj</code></em> :</span></p></td>
<td> base source instance
</td>
</tr></tbody>
</table></div>
</div>
</div>
<div class="refsect1" lang="en">
<a name="GstBaseSrc.property-details"></a><h2>Property Details</h2>
<div class="refsect2" lang="en">
<a name="GstBaseSrc--blocksize"></a><h3>The <code class="literal">"blocksize"</code> property</h3>
<pre class="programlisting">  "blocksize"                <a
href="../glib/glib-Basic-Types.html#gulong"
>gulong</a>                : Read / Write</pre>
<p>Size in bytes to read per buffer (-1 = default).</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="GstBaseSrc--do-timestamp"></a><h3>The <code class="literal">"do-timestamp"</code> property</h3>
<pre class="programlisting">  "do-timestamp"             <a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a>              : Read / Write</pre>
<p>Apply current stream time to buffers.</p>
<p>Default value: FALSE</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="GstBaseSrc--num-buffers"></a><h3>The <code class="literal">"num-buffers"</code> property</h3>
<pre class="programlisting">  "num-buffers"              <a
href="../glib/glib-Basic-Types.html#gint"
>gint</a>                  : Read / Write</pre>
<p>Number of buffers to output before sending EOS (-1 = unlimited).</p>
<p>Allowed values: &gt;= -1</p>
<p>Default value: -1</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="GstBaseSrc--typefind"></a><h3>The <code class="literal">"typefind"</code> property</h3>
<pre class="programlisting">  "typefind"                 <a
href="../glib/glib-Basic-Types.html#gboolean"
>gboolean</a>              : Read / Write</pre>
<p>Run typefind before negotiating.</p>
<p>Default value: FALSE</p>
</div>
</div>
<div class="refsect1" lang="en">
<a name="GstBaseSrc.see-also"></a><h2>See Also</h2>
#GstPushSrc, <a class="link" href="GstBaseTransform.html" title="GstBaseTransform"><span class="type">GstBaseTransform</span></a>, <a class="link" href="GstBaseSink.html" title="GstBaseSink"><span class="type">GstBaseSink</span></a>
</div>
</div>
<div class="footer">
<hr>
          Generated by GTK-Doc V1.11</div>
</body>
</html>
